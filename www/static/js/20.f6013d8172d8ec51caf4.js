webpackJsonp([20],{"2Vf1":function(t,e,r){e=t.exports=r("I71c")(!1),e.push([t.i,".main[data-v-1d19ff9e]{position:relative}.order[data-v-1d19ff9e]{background:#fff}.order h2[data-v-1d19ff9e]{padding:15px;font-size:20px;line-height:30px}.order .line[data-v-1d19ff9e]{border-bottom:1px solid #e3e3e3;margin:0 15px}.order .not-content[data-v-1d19ff9e]{text-align:center;font-size:1rem;color:#111;margin:1rem 0 1.5rem}.order .buy-btn[data-v-1d19ff9e]{text-align:right;margin-top:.8rem}.order .buy-btn a[data-v-1d19ff9e]{margin:0 .2rem}.order .buy-btn .btn1[data-v-1d19ff9e]{display:inline-block;background:-webkit-gradient(linear,left top,left bottom,from(#f7dfa5),to(#feb800));background:linear-gradient(180deg,#f7dfa5,#feb800);-webkit-box-shadow:0 .1rem 0 hsla(0,0%,100%,.4) inset;box-shadow:inset 0 .1rem 0 hsla(0,0%,100%,.4);border-radius:.2rem;font-size:.8rem;text-align:center;padding:.4rem .8rem;border:1px solid #b18007}.order .buy-btn .btn2[data-v-1d19ff9e]{border:1px solid #adb1b8;padding:.4rem .8rem;display:inline-block;border-radius:.2rem;background:-webkit-gradient(linear,left top,left bottom,from(#f7f8fa),to(#e7e9ec));background:linear-gradient(180deg,#f7f8fa,#e7e9ec);-webkit-box-shadow:0 .1rem 0 hsla(0,0%,100%,.6) inset;box-shadow:inset 0 .1rem 0 hsla(0,0%,100%,.6);font-size:.8rem}.order .order-item[data-v-1d19ff9e]{display:block;position:relative;padding:15px;overflow:hidden;border-bottom:1px solid #e3e3e3}.order .order-item[data-v-1d19ff9e]:last-child{border-bottom:0}.order .order-item .order-img[data-v-1d19ff9e]{width:25%;text-align:center;margin-right:15px}.order .order-item .order-img img[data-v-1d19ff9e]{max-width:100%;max-height:90px}.order .order-item .order-info[data-v-1d19ff9e]{position:relative;top:50%;left:0;overflow:hidden;font-size:.9rem;color:#000}.order .order-item .order-info .order-name[data-v-1d19ff9e]{color:#111;font-size:1rem;font-weight:700;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.order .order-item .order-info .date[data-v-1d19ff9e]{color:#666;font-size:.9rem;margin-top:.2rem}",""])},OPIq:function(t,e,r){"use strict";function o(t){r("mmKP")}Object.defineProperty(e,"__esModule",{value:!0});var i=(r("gsKR"),r("aLIU")),n=r("vHzS"),a=r("Z0/y"),d=o,s=a(i.a,n.a,!1,d,"data-v-1d19ff9e",null);e.default=s.exports},QXXZ:function(t,e,r){"use strict";function o(t){var e=parseFloat(t);if(isNaN(e))return alert("function:changeTwoDecimal->parameter error"),!1;var e=Math.round(100*t)/100,r=e.toString(),o=r.indexOf(".");for(o<0&&(o=r.length,r+=".");r.length<=o+2;)r+="0";return r}var i=r("VCXJ");i.a.filter("fmoney",function(t){if(!t)return"";var e=parseFloat(t);if(isNaN(e))return alert("function:changeTwoDecimal->parameter error"),!1;var e=Math.round(100*t)/100,r=e.toString(),o=r.indexOf(".");for(o<0&&(o=r.length,r+=".");r.length<=o+2;)r+="0";return r}),i.a.filter("numHandle",function(t){return t?o(t).split(".")[0]:""}),i.a.filter("numHandle2",function(t){return t?o(t).split(".")[1]:""})},aLIU:function(t,e,r){"use strict";var o=r("3cXf"),i=r.n(o),n=r("P9l9"),a=(r("QXXZ"),r("vPHJ"));r("9rMa");e.a={name:"myOrder",data:function(){return{orderlist:[],page:1,busy:!1,isContent:!1}},filters:{formatDate:function(t){var e=new Date(1e3*t);return Object(a.a)(e,"yyyy-MM-dd h:m:s")}},methods:{loadMore:function(){var t=this;this.busy=!0,this.$vux.loading.show({text:"Loading"}),setTimeout(function(){t.page++,t.getOrderList(!0),t.$vux.loading.hide()},1e3)},infiniteScroll:function(){(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight>=document.querySelector(".main").clientHeight&&(this.busy||this.loadMore())},getOrderList:function(t){var e=this;n.a.MyOrder({page:this.page,per_page:10}).then(function(r){0==r.data.error_code&&(t?(e.orderlist=e.orderlist.concat(r.data.orders),r.data.paged&&0==r.data.paged.more?(e.busy=!0,e.isContent=!0):e.busy=!1):(e.orderlist=r.data.orders,e.busy=!1,e.$vux.loading.hide()))})},goMyOrder:function(t){this.$router.push({path:"/orderDetails",query:{order:t}})},Pay:function(t){this.$router.push({name:"selectPaymethod",params:{order:t}})},Confirm:function(t){var e=this;n.a.Confirm({order:t}).then(function(r){0==r.data.error_code&&e.$router.push({path:"/orderDetails",query:{order:t}})})},Cancel:function(t,e){var r=this;this.$vux.confirm.show({title:"Confirmation of cancellation",content:"Whether to cancel the order or not",confirmText:"confirm",cancelText:"cancel",onCancel:function(){},onConfirm:function(){n.a.CancelOrder({order:Number(t),reason:1}).then(function(t){0==t.data.error_code?(r.orderlist.splice(e,1),r.$vux.toast.text("Cancel success","middle")):r.$vux.toast.text("Cancel fail","middle")})}})},Comment:function(t){this.$router.push({name:"writeReview",params:{order:t}})},DelOrder:function(t){var e=this;n.a.DeleteOrder({order:Number(t)}).then(function(t){0==t.data.error_code&&(e.orderlist.splice(index,1),e.$vux.toast.text("Delete success","middle"))})},AgainBuy:function(t){var e=this,r=t.goods,o=r[0].propertyId.split(","),a=r[0].total_amount;1==r.length?n.a.AddCart({product:r[0].id,property:i()(o),amount:a}).then(function(t){0==t.data.error_code&&(e.$vux.toast.text("Added to cart","middle"),e.$router.push({path:"/cart"}))}):r.length>1&&r.map(function(t,r){o=t.propertyId.split(","),n.a.AddCart({product:t.id,property:i()(o),amount:t.total_amount}).then(function(t){0==t.data.error_code&&(e.$vux.toast.text("Added to cart","middle"),e.$router.push({path:"/cart"}))})})}},beforeRouteEnter:function(t,e,r){r(function(t){window.addEventListener("scroll",t.infiniteScroll,!0)})},beforeRouteLeave:function(t,e,r){window.removeEventListener("scroll",this.infiniteScroll,!0),r()},mounted:function(){window.addEventListener("scroll",this.infiniteScroll,!0),this.$store.dispatch("isShowSearch",!1),this.$store.dispatch("isShowBack",!0),this.getOrderList(!1)}}},gsKR:function(t,e,r){"use strict";var o=r("3cXf");r.n(o),r("P9l9"),r("QXXZ"),r("vPHJ"),r("9rMa")},mmKP:function(t,e,r){var o=r("2Vf1");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("FIqI")("236428ac",o,!0,{})},vHzS:function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order"},[r("h2",[t._v("Your Orders")]),t._v(" "),r("div",{staticClass:"line"}),t._v(" "),t._l(t.orderlist,function(e,o){return r("a",{key:e.id,staticClass:"order-item"},[t._l(e.goods,function(o){return r("div",[r("div",{staticClass:"clearfix",on:{click:function(r){t.goMyOrder(e.id)}}},[r("div",{staticClass:"order-img fl"},[r("img",{attrs:{src:o.product.photos[0].large}})]),t._v(" "),r("div",{staticClass:"order-info"},[r("div",{staticClass:"order-name"},[t._v(t._s(o.product.name))]),t._v(" "),r("div",[t._v(t._s(o.property))]),t._v(" "),r("div",{staticStyle:{"font-weight":"bold"}},[t._v("$"+t._s(t._f("fmoney")(o.product_price||"0")))]),t._v(" "),r("div",{staticClass:"date"},[t._v("\n\t\t\t\t\t\t\tOrder date: "+t._s(t._f("formatDate")(e.created_at))+"\n\t\t\t\t\t\t")])])])])}),t._v(" "),r("div",{staticClass:"buy-btn"},[0==e.status?r("a",{staticClass:"btn1",on:{click:function(r){t.Pay(e.id)}}},[t._v("Payment")]):t._e(),t._v(" "),2==e.status?r("a",{staticClass:"btn1",on:{click:function(r){t.Confirm(e.id)}}},[t._v("Confirmation of receipt")]):t._e(),t._v(" "),3==e.status?r("a",{staticClass:"btn1",on:{click:function(r){t.Comment(e.id)}}},[t._v("Evaluate")]):t._e(),t._v(" "),0==e.status?r("a",{staticClass:"btn2",on:{click:function(r){t.Cancel(e.id,o)}}},[t._v("Cancellation of order")]):t._e(),t._v(" "),3==e.status||4==e.status||5==e.status?r("a",{staticClass:"btn2",on:{click:function(r){t.DelOrder(e.id)}}},[t._v("Delete order")]):t._e()])],2)}),t._v(" "),t.isContent?r("div",{staticClass:"not-content"},[t._v("There is no order")]):t._e()],2)},i=[],n={render:o,staticRenderFns:i};e.a=n}});